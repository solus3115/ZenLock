<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZenLock</title>
  <style>
    /* ===== Estilos base ===== */
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background-color: #fdfaf6;
      color: #333;
      transition: background 0.3s, color 0.3s;
    }

    h1, h2, h3 {
      font-weight: 600;
      margin: 0.5em 0;
    }

    button {
      background: #3b82f6;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }
    button:hover { background: #2563eb; }

    .container {
      padding: 20px;
      text-align: center;
    }

    /* ===== Pantalla de Bienvenida ===== */
    #welcomeScreen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: linear-gradient(180deg, #fef9f5, #f3e9dc);
    }
    #welcomeScreen img {
      width: 180px;
      height: auto;
      margin-bottom: 20px;
    }

    /* ===== Configuraci√≥n inicial ===== */
    #configScreen {
      display: none;
      min-height: 100vh;
      background: #fafafa;
    }
    .config-option {
      margin: 15px 0;
      text-align: left;
    }
    label { font-weight: bold; display: block; margin-bottom: 5px; }

    select, input[type="text"] {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    /* ===== Modo oscuro ===== */
    body.dark {
      background-color: #1f2937;
      color: #e5e7eb;
    }
    body.dark button {
      background: #10b981;
    }
    body.dark button:hover {
      background: #059669;
    }
    body.dark #welcomeScreen {
      background: linear-gradient(180deg, #111827, #1f2937);
    }
    body.dark #configScreen {
      background: #111827;
    }
  </style>
</head>
<body>
  <!-- ===== Pantalla de Bienvenida ===== -->
  <div id="welcomeScreen">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAMFBMVEXMzMyWlpavr6+3t7fFxcWxsbG+vr7R0dHFxcW7u7vNzc3f39/MzMzY2Njp6en////HyI1lAAABQElEQVR4nO3aS46DMAwFUMlZ/f9nm0JglVApukTjWN9kugEOTvPTh3vjIgiAIgiAIgiAIgqA98xl+HnO1Fjo3Vdb7ZjrmPt3g7i4Ws28TYk+Tk5OLpXK5vdpddx65tiHVh9AewTQmTd5XcQq1HXwrpCLeExSwi5F7g6qgOULLOsJaZBfVdpEegZzPnxFzXUcXq8u9U7V2EsmdcGVZClXdKoN6lZLtWUIW0T6wVqle5o7xZtJG4oXxohdE4ON19LVe+6OHD6PZpw7bptf3Kl/1PSZvjMdP3vVnWThcY9vVhblYOxJtMPVfOJ/B+FZhFWj7l6EX8bhmYM5rEpcQqFvPBGBY7/po8aBIMQRAEQRAEQRAEQZCYfgCG0j/dAoc9YQAAAABJRU5ErkJggg==" alt="ZenLock Logo">
    <h1>Bienvenido a ZenLock</h1>
    <p>Tu guardi√°n zen para un uso saludable del celular üê∂‚ú®</p>
    <button onclick="goToConfig()">Comenzar</button>
  </div>

  <!-- ===== Pantalla de Configuraci√≥n ===== -->
  <div id="configScreen" class="container">
    <h2>Configuraci√≥n Inicial</h2>
    <div class="config-option">
      <label for="limit">‚è± Tiempo m√°ximo de uso (minutos):</label>
      <input type="number" id="limit" min="10" max="600" value="60">
    </div>
    <div class="config-option">
      <label for="tone">üîî Tono de notificaci√≥n:</label>
      <select id="tone">
        <option value="tono1.mp3">Tono 1</option>
        <option value="tono2.mp3">Tono 2</option>
        <option value="otro">Otro...</option>
      </select>
      <input type="text" id="customTone" placeholder="URL de tu tono" style="display:none;">
    </div>
    <button onclick="saveConfig()">Guardar y continuar con Zen</button>
  </div>

  <script>
    // Cambiar de bienvenida a configuraci√≥n
    function goToConfig() {
      document.getElementById('welcomeScreen').style.display = 'none';
      document.getElementById('configScreen').style.display = 'block';
    }

    // Guardar configuraci√≥n
    function saveConfig() {
      const limit = document.getElementById('limit').value;
      const tone = document.getElementById('tone').value;
      const customTone = document.getElementById('customTone').value;

      const toneFinal = (tone === "otro" && customTone) ? customTone : tone;

      localStorage.setItem("zenlock_limit", limit);
      localStorage.setItem("zenlock_tone", toneFinal);

      alert("‚úÖ Configuraci√≥n guardada. Listo para comenzar con Zen!");
      // Aqu√≠ luego mandamos al home (Parte 2)
    }

    // Mostrar campo de tono personalizado
    document.getElementById("tone").addEventListener("change", function() {
      if (this.value === "otro") {
        document.getElementById("customTone").style.display = "block";
      } else {
        document.getElementById("customTone").style.display = "none";
      }
    });
  </script>
  <!-- ===== Pantalla Principal y Navegaci√≥n ===== -->
  <div id="mainApp" style="display:none;">
    <!-- Contenido din√°mico -->
    <div id="tabContent" class="container"></div>

    <!-- Barra inferior -->
    <div id="bottomNav" style="
      position: fixed; bottom: 0; left: 0; right: 0;
      display: flex; justify-content: space-around;
      background: #fff; border-top: 1px solid #ddd; padding: 10px 0;">
      <button onclick="showTab('home')">üè† Inicio</button>
      <button onclick="showTab('progress')">üìä Progreso</button>
      <button onclick="showTab('zen')">üßò ZenTime</button>
      <button onclick="showTab('challenges')">üéØ Retos</button>
      <button onclick="showTab('profile')">üë§ Perfil</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Ir al Home despu√©s de guardar config
    function saveConfig() {
      const limit = document.getElementById('limit').value;
      const tone = document.getElementById('tone').value;
      const customTone = document.getElementById('customTone').value;
      const toneFinal = (tone === "otro" && customTone) ? customTone : tone;

      localStorage.setItem("zenlock_limit", limit);
      localStorage.setItem("zenlock_tone", toneFinal);

      document.getElementById('configScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      showTab('home');
    }

    // Tabs
    function showTab(tab) {
      const content = document.getElementById("tabContent");
      if (tab === "home") {
        content.innerHTML = `
          <h2>üê∂ ZenLock</h2>
          <p>Bienvenido a tu espacio de calma digital ‚ú®</p>
        `;
      }
      if (tab === "progress") {
        content.innerHTML = `
          <h2>üìä Tu Progreso</h2>
          <canvas id="progressChart"></canvas>
          <p>Sesiones Zen completadas: <span id="zenSessions">0</span></p>
        `;
        renderChart();
        document.getElementById("zenSessions").textContent = localStorage.getItem("zenlock_sessions") || 0;
      }
      if (tab === "zen") {
        content.innerHTML = `
          <h2>üßò ZenTime</h2>
          <p>Activa tu modo zen y descon√©ctate de distracciones.</p>
          <button onclick="startZen()">Iniciar sesi√≥n Zen</button>
          <p id="zenStatus"></p>
        `;
      }
      if (tab === "challenges") {
        content.innerHTML = `
          <h2>üéØ Retos</h2>
          <button onclick="completeChallenge()">Cumplir reto</button>
          <p id="challengeResult"></p>
        `;
      }
      if (tab === "profile") {
        const darkMode = localStorage.getItem("zenlock_dark") === "true";
        content.innerHTML = `
          <h2>üë§ Perfil</h2>
          <p><strong>L√≠mite diario:</strong> ${localStorage.getItem("zenlock_limit")} minutos</p>
          <p><strong>Tono:</strong> ${localStorage.getItem("zenlock_tone")}</p>
          <label>üåô Modo oscuro:
            <input type="checkbox" id="darkToggle" ${darkMode ? "checked" : ""}>
          </label>
        `;
        document.getElementById("darkToggle").addEventListener("change", toggleDark);
      }
    }

    // Chart.js
    function renderChart() {
      const ctx = document.getElementById("progressChart");
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ["Lunes","Martes","Mi√©rcoles","Jueves","Viernes","S√°bado","Domingo"],
          datasets: [{
            label: "Uso diario (min)",
            data: [30, 45, 50, 40, 60, 35, 20],
            backgroundColor: "#3b82f6"
          }]
        }
      });
    }

    // ZenTime
    function startZen() {
      let sessions = parseInt(localStorage.getItem("zenlock_sessions") || "0");
      sessions++;
      localStorage.setItem("zenlock_sessions", sessions);
      document.getElementById("zenStatus").textContent = `Sesi√≥n activa üßò Total sesiones: ${sessions}`;
    }

    // Retos
    const stickers = ["üèÖ", "üéâ", "‚≠ê", "üê∂", "üå∏"];
    function completeChallenge() {
      const reward = stickers[Math.floor(Math.random() * stickers.length)];
      document.getElementById("challengeResult").textContent = `¬°Reto cumplido! Ganaste ${reward}`;
    }

    // Modo oscuro
    function toggleDark() {
      const isDark = document.getElementById("darkToggle").checked;
      localStorage.setItem("zenlock_dark", isDark);
      document.body.classList.toggle("dark", isDark);
    }

    // Aplicar modo oscuro guardado
    window.onload = () => {
      if (localStorage.getItem("zenlock_dark") === "true") {
        document.body.classList.add("dark");
      }
    };
  </script>
</body>
</html>
